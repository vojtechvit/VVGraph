(function(){var n=angular.module("app",[]).controller("HomeController",["$scope","$http","nodesToDataSet","edgesToDataSet","createGraph","refreshGraph",function(n,t,i,r,u,f){function e(t){t.on("selectNode",function(i){i.nodes.length==2?(n.startNodeId=i.nodes[0],n.endNodeId=i.nodes[1],n.$apply()):i.nodes.length>2&&(t.unselectAll(),t.selectNodes([n.startNodeId,n.endNodeId]))});t.on("deselectNode",function(t){t.nodes.length<2&&(n.startNodeId=null,n.endNodeId=null,n.$apply())})}n.errorMessage=null;n.graphUrl="http://localhost:5001/api/v1/graphs/test1";n.graphName=null;n.nodes=null;n.edges=null;n.network=null;n.changeGraph=function(){t.get(n.graphUrl).success(function(t){n.graphName=t.name;n.nodes=i(t.nodes);n.edges=r(t.edges);n.network=u(n.nodes,n.edges);e(n.network);n.errorMessage=null}).error(function(){n.errorMessage="Could not load the graph information."});n.startNodeId=null;n.endNodeId=null};n.changeGraph();n.startNodeId=null;n.endNodeId=null;n.findShortestPath=function(){t({url:n.graphUrl.trim("/")+"/shortest-path",method:"GET",params:{startNodeId:n.startNodeId,endNodeId:n.endNodeId}}).then(function(t){f(n.network,n.nodes,n.edges,t.data);n.network.unselectAll();n.startNodeId=null;n.endNodeId=null;n.errorMessage=null},function(){n.errorMessage="Could not load the load shortest path."})}}]).factory("nodesToDataSet",[function(){return function(n){var t=new vis.DataSet;return n.forEach(function(n){t.add([{id:n.id,label:n.label,shape:"circle",color:{border:"#000000",background:"#ffffff",hover:{border:"#000000",background:"#dddddd"}}}])}),t}}]).factory("edgesToDataSet",[function(){return function(n){var t=new vis.DataSet;return n.forEach(function(n){t.add([{from:n.startNodeId,to:n.endNodeId,color:{color:"#000000",inherit:!1},width:1}])}),t}}]).factory("createGraph",[function(){return function(n,t){container=document.getElementById("graph-container");var i={nodes:n,edges:t};return new vis.Network(container,i,{interaction:{hover:!0,multiselect:!0,selectConnectedEdges:!1,navigationButtons:!0}})}}]).factory("refreshGraph",[function(){return function(n,t,i,r){t.forEach(function(n){var t,i;r.indexOf(n.id)!=-1?(t="#32a800",i="#e6ffdb"):(t="#000000",i="#ffffff");n.color.border=t;n.color.background=i});i.forEach(function(n){var t=r.indexOf(n.from),i=r.indexOf(n.to),u,f;t!=-1&&i!=-1&&(i==t+1||i==t-1)?(u="#32a800",f=2):(u="#000000",f=1);n.color.color=u;n.width=f});n.setData({nodes:t,edges:i});n.redraw()}}])})();