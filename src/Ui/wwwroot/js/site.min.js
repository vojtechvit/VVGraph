(function(){var n=angular.module("app",["ngMessages","angularVis"]).constant("config",{graphName:"main",defaultGraphUrl:"http://localhost:5001/api/v1/graphs/test1",shortestPathEndpoint:"/shortest-path"});constant("").controller("HomeController",["$scope",function(n){var t=this;t.graph=null;n.$on("graphSelected",function(){t.graph=null});n.$on("graphLoaded",function(n,i){t.graph=i.graph})}]).controller("GraphSelectorController",["$rootScope","config",function(n,t){var i=this;i.graphUrl=t.defaultGraphUrl;i.selectGraph=function(){n.$broadcast("graphSelected",{graphUrl:i.graphUrl})}}]).controller("ErrorController",["$scope",function(n){var t=this;t.error=null;n.$on("error",function(n,i){t.error=i});n.$on("graphSelected",function(){t.error=null})}]).controller("GraphController",["$rootScope","$scope","config","graphApi","visHelper",function(n,t,i,r,u){var f=this;u.setOptions(i.graphName,{interaction:{hover:!0,multiselect:!0,selectConnectedEdges:!1,navigationButtons:!0}});u.setEvents(i.graphName,{selectNode:function(i){t.$apply(function(){n.$broadcast("nodeSelected",{selectedNodeIds:i.nodes})})},deselectNode:function(i){t.$apply(function(){n.$broadcast("nodeUnselected",{selectedNodeIds:i.nodes})})}});t.$on("graphSelected",function(n,t){r.getGraph(t.graphUrl).then(f.loadGraph,f.graphError)});f.loadGraph=function(t){var r=t.data;u.setNodes(i.graphName,r.nodes);u.setEdges(i.graphName,r.edges);u.redraw();n.$broadcast("graphLoaded",{graph:r})};f.graphError=function(){n.$broadcast("error",{getGraphApiError:!0})};t.$on("pathFound",function(n,t){u.highlightPath(i.graphName,t.pathNodeIds);u.redraw()})}]).controller("GraphActionsController",["$rootScope","$scope","config","graphApi","visHelper",function(n,t,i,r,u){var f=this;f.graphUrl=null;f.selectedNodeIds=[];f.findShortestPath=function(){r.findShortestPath(f.graphUrl,f.selectedNodeIds[0],f.selectedNodeIds[1]).then(f.shortestPathFound,f.shortestPathError)};f.shortestPathFound=function(t){f.selectedNodeIds=[];n.$broadcast("pathFound",{pathNodeIds:t.data})};f.shortestPathError=function(){n.$broadcast("error",{shortestPathApiError:!0})};t.$on("graphSelected",function(n,t){f.graphUrl=t.graphUrl;f.selectedNodeIds=[]});t.$on("nodeSelected",function(n,t){t.selectedNodeIds.length>2?u.setSelectedNodes(i.graphName,f.selectedNodeIds):f.selectedNodeIds=t.selectedNodeIds.slice()});t.$on("nodeUnselected",function(n,t){f.selectedNodeIds=t.selectedNodeIds.slice()})}]).factory("graphApi",["$http","config",function(n,t){return{getGraph:function(t){return n({url:t,method:"GET"})},findShortestPath:function(i,r,u){return n({url:i.trim("/")+t.shortestPathEndpoint,method:"GET",params:{startNodeId:r,endNodeId:u}})}}}])})();