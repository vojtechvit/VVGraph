(function(){var n=angular.module("app",["ngMessages","angularVis"]).constant("config",{graphName:"main",defaultGraphUrl:"http://localhost:5001/api/v1/graphs/test1",shortestPathEndpoint:"/shortest-path",nodeOptions:{shape:"circle",color:{border:"#000000",background:"#ffffff",hover:{border:"#000000",background:"#dddddd"}}},edgeOptions:{color:{color:"#000000",inherit:!1},width:1}}).controller("HomeController",["$scope",function(n){var t=this;t.graph=null;n.$on("graphSelected",function(){t.graph=null});n.$on("graphLoaded",function(n,i){t.graph=i.graph})}]).controller("GraphSelectorController",["$rootScope","config",function(n,t){var i=this;i.graphUrl=t.defaultGraphUrl;i.selectGraph=function(){n.$broadcast("graphSelected",{graphUrl:i.graphUrl})}}]).controller("ErrorController",["$scope",function(n){var t=this;t.error=null;n.$on("error",function(n,i){t.error=i});n.$on("graphSelected",function(){t.error=null})}]).controller("GraphController",["$rootScope","$scope","config","graphApi","visHelper",function(n,t,i,r,u){var f=this;t.$on("graphSelected",function(n,t){r.getGraph(t.graphUrl).then(f.loadGraph,f.graphError)});f.loadGraph=function(r){u.initGraph(i.graphName,{interaction:{hover:!0,multiselect:!0,selectConnectedEdges:!1,navigationButtons:!0}},{selectNode:function(i){t.$apply(function(){n.$broadcast("nodeSelected",{selectedNodeIds:i.nodes})})},deselectNode:function(i){t.$apply(function(){n.$broadcast("nodeUnselected",{selectedNodeIds:i.nodes})})}});var f=r.data;u.setNodes(i.graphName,f.nodes.map(function(n){return angular.extend(n,i.nodeOptions),n}));u.setEdges(i.graphName,f.edges.map(function(n){var t={from:n.startNodeId,to:n.endNodeId};return angular.extend(t,i.edgeOptions),t}));u.redraw(i.graphName);n.$broadcast("graphLoaded",{graph:f})};f.graphError=function(){n.$broadcast("error",{getGraphApiError:!0})};t.$on("pathFound",function(n,t){u.highlightPath(i.graphName,t.pathNodeIds,{normal:{color:{border:"#000000",background:"#ffffff"},width:1},highlighted:{color:{border:"#32a800",background:"#e6ffdb"},width:2}});u.redraw(i.graphName)})}]).controller("GraphActionsController",["$rootScope","$scope","config","graphApi","visHelper",function(n,t,i,r,u){var f=this;f.graphUrl=null;f.selectedNodeIds=[];f.findShortestPath=function(){r.findShortestPath(f.graphUrl,f.selectedNodeIds[0],f.selectedNodeIds[1]).then(f.shortestPathFound,f.shortestPathError)};f.shortestPathFound=function(t){f.selectedNodeIds=[];n.$broadcast("pathFound",{pathNodeIds:t.data})};f.shortestPathError=function(){n.$broadcast("error",{shortestPathApiError:!0})};t.$on("graphSelected",function(n,t){f.graphUrl=t.graphUrl;f.selectedNodeIds=[]});t.$on("nodeSelected",function(n,t){t.selectedNodeIds.length>2?u.setSelectedNodes(i.graphName,f.selectedNodeIds):f.selectedNodeIds=t.selectedNodeIds.slice()});t.$on("nodeUnselected",function(n,t){f.selectedNodeIds=t.selectedNodeIds.slice()})}]).factory("graphApi",["$http","config",function(n,t){return{getGraph:function(t){return n({url:t,method:"GET"})},findShortestPath:function(i,r,u){return n({url:i.trim("/")+t.shortestPathEndpoint,method:"GET",params:{startNodeId:r,endNodeId:u}})}}}])})();